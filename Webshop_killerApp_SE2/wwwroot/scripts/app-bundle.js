var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("app",["require","exports","aurelia-framework","aurelia-router","aurelia-fetch-client","aurelia-authentication","aurelia-event-aggregator","jwt-decode","bootstrap"],function(e,t,r,n,i,o,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,r,n,i,o){this.http=e,this.router=t,this.config=n,this.auth=i,this.eventAggregator=o,this.configHttp(e),this.configureRouter(r)}return e.prototype.attached=function(){var e=this;this.auth.authenticated&&(this.userId=c(this.auth.getAccessToken()).userid),this.subscription=this.eventAggregator.subscribe("authentication-change",function(){e.auth.authenticated?e.userId=c(e.auth.getAccessToken()).userid:e.userId=null,e.router.navigateToRoute("home")})},e.prototype.detached=function(){this.subscription.dispose()},e.prototype.logout=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.auth.logout(),[2]})})},e.prototype.configureRouter=function(e){e.title="Aurelia",e.options.pushState=!0,e.map([{title:"Home",route:["","home"],name:"home",moduleId:"components/home",nav:!0},{title:"Catalog",route:"catalog/",name:"catalog",moduleId:"components/catalog",nav:!0},{title:"Catalog",route:"catalog/:number",name:"catalogNum",moduleId:"components/catalog"},{title:"Product",route:"catalog/product/:id",name:"product",moduleId:"components/productDetail"},{title:"My Products",route:"my-products",name:"orderedProducts",moduleId:"components/ordered-products",auth:!0},{title:"My Order",route:"my-order",name:"MyOrders",moduleId:"components/orderlist",auth:!0},{title:"Order Confirmation",route:"order-confirm",name:"OrderConfirmation",moduleId:"components/orderconfirmation",auth:!0},{title:"Login",route:"login",name:"login",moduleId:"components/login"}]),e.addPipelineStep("authorize",u),e.mapUnknownRoutes("error-404")},e.prototype.configHttp=function(e){e.configure(function(e){e.withBaseUrl("api").withDefaults({method:"POST",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"Fetch"}}).withInterceptor({request:function(e){return console.log("Requesting "+e.method+" "+e.url),e},response:function(e){return console.log("Received "+e.status+" "+e.url),e}})})},e}();s=__decorate([r.autoinject,__metadata("design:paramtypes",[i.HttpClient,n.Router,n.RouterConfiguration,o.FetchConfig,o.AuthService,a.EventAggregator])],s),t.App=s;var u=function(){function e(e){this.authService=e}return e.prototype.run=function(e,t){if(e.getAllInstructions().some(function(e){return e.config.auth})){if(!this.authService.isAuthenticated())return t.cancel(new n.Redirect("login"))}return t()},e}();u=__decorate([r.autoinject,__metadata("design:paramtypes",[o.AuthService])],u)}),define("authConfig",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=r}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("main",["require","exports","./environment","./authConfig"],function(e,t,r,n){"use strict";function i(e){e.use.standardConfiguration().feature("resources").plugin("aurelia-authentication",function(e){e.configure(n.default)}),r.default.debug&&e.use.developmentLogging(),r.default.testing&&e.use.plugin("aurelia-testing"),e.start().then(function(){return e.setRoot()})}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=i});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("components/catalog",["require","exports","aurelia-framework","../services/catalogService","../services/CartService"],function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.catalogService=e,this.cartService=t,this.products=[],this.categories=[],this.selectedCategory=null,this.pageAmount=1,this.number=1,this.searchString=""}return e.prototype.attached=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,this.catalogService.getTopLevelCategories()];case 1:return e.categories=t.sent(),[2]}})})},e.prototype.refreshPage=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return null!=this.searchString&&""!=this.searchString?[3,2]:[4,this.catalogService.getPage(e)];case 1:return t=r.sent(),[3,4];case 2:return[4,this.catalogService.search(e,this.searchString)];case 3:t=r.sent(),r.label=4;case 4:return this.products=t.item1,this.pageAmount=t.item2,[2]}})})},e.prototype.activate=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return null!=e.number?this.number=e.number:this.number=1,[4,this.refreshPage(this.number)];case 1:return t.sent(),[2]}})})},e.prototype.search=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.refreshPage(this.number)];case 1:return e.sent(),[2]}})})},e}();o=__decorate([r.autoinject,__metadata("design:paramtypes",[n.catalogService,i.CartService])],o),t.Catalog=o}),define("components/error-404",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.message="Hello world"}return e}();t.Error404=r}),define("components/home",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.message="Hello world"}return e}();t.Home=r});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("components/login",["require","exports","aurelia-router","aurelia-framework","aurelia-fetch-client","aurelia-authentication","../entities/User","../services/UserService"],function(e,t,r,n,i,o,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,r,n){this.http=e,this.auth=t,this.userService=r,this.router=n,this.username="",this.password="",this.newPassword="",this.newUser=new a.User}return e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){switch(t.label){case 0:return[4,this.auth.login({username:this.username,password:this.password}).catch(function(t){e.message="Inloggen mislukt"})];case 1:return t.sent(),[2]}})})},e.prototype.register=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,this.userService.Register(this.newUser,this.newPassword)];case 1:return e.message=t.sent(),[2]}})})},e.prototype.logout=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.auth.logout(""),[2]})})},e}();s=__decorate([n.autoinject,__metadata("design:paramtypes",[i.HttpClient,o.AuthService,c.UserService,r.Router])],s),t.login=s});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("components/orderconfirmation",["require","exports","aurelia-framework","../services/CartService","../services/OrderService","aurelia-authentication","aurelia-router","jwt-decode"],function(e,t,r,n,i,o,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,r,n){this.cartService=e,this.orderService=t,this.auth=r,this.router=n,this.value=[]}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return null==this.value||0===this.value.length},enumerable:!0,configurable:!0}),e.prototype.attached=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,this.cartService.getCart()];case 1:return e.value=t.sent(),[2]}})})},e.prototype.addOrder=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return e=this,[4,this.cartService.getCart()];case 1:return e.value=r.sent(),t=c(this.auth.getAccessToken()).userid,[4,this.orderService.addOrder(t,this.discount,this.value)];case 2:return r.sent()?[3,3]:(alert("placing order failed"),[3,5]);case 3:return[4,this.cartService.emptyCart()];case 4:r.sent(),this.router.history.navigateBack(),r.label=5;case 5:return[2]}})})},e}();s=__decorate([r.autoinject,__metadata("design:paramtypes",[n.CartService,i.OrderService,o.AuthService,a.Router])],s),t.OrderConfirmation=s});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("components/ordered-products",["require","exports","aurelia-framework","../services/OrderService","aurelia-authentication","jwt-decode"],function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){this.OrderService=e,this.auth=t}return e.prototype.attached=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return e=o(this.auth.getAccessToken()).userid,t=this,[4,this.OrderService.getOrderedProducts(e)];case 1:return t.products=r.sent(),[2]}})})},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return null==this.products||0===this.products.length},enumerable:!0,configurable:!0}),e}();a=__decorate([r.autoinject,__metadata("design:paramtypes",[n.OrderService,i.AuthService])],a),t.OrderedProducts=a});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("components/orderlist",["require","exports","aurelia-framework","../services/OrderService","aurelia-authentication","jwt-decode"],function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){this.OrderService=e,this.auth=t,this.orders=[],this.products=[]}return e.prototype.attached=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return e=o(this.auth.getAccessToken()).userid,t=this,[4,this.OrderService.getOrdersByUser(e)];case 1:return t.orders=r.sent(),this.isOrderEmpty?[3,3]:[4,this.selectOrder(this.orders[0].id)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},Object.defineProperty(e.prototype,"isOrderEmpty",{get:function(){return null==this.orders||0===this.orders.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isProductEmpty",{get:function(){return null==this.products||0===this.products.length},enumerable:!0,configurable:!0}),e.prototype.selectOrder=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return this.selectedOrder=e,t=this,[4,this.OrderService.getProductsByOrder(e)];case 1:return t.products=r.sent(),[2]}})})},e}();a=__decorate([r.autoinject,__metadata("design:paramtypes",[n.OrderService,i.AuthService])],a),t.orderlist=a});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("components/productDetail",["require","exports","aurelia-framework","aurelia-authentication","../services/catalogService","../services/CartService","../entities/Review","jwt-decode"],function(e,t,r,n,i,o,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,r){this.catalogService=e,this.auth=t,this.cartService=r,this.postedReview=new a.Review}return e.prototype.activate=function(e,t){return __awaiter(this,void 0,void 0,function(){var t,r,n,i,o,a,s;return __generator(this,function(u){switch(u.label){case 0:return t=this,[4,this.catalogService.getProduct(e.id)];case 1:return t.product=u.sent(),r=this,[4,this.catalogService.getReviews(e.id)];case 2:if(r.reviews=u.sent(),this.auth.isAuthenticated())for(n=c(this.auth.getAccessToken()).userid,i=c(this.auth.getAccessToken()).name,this.postedReview.user=i,this.postedReview.product=e.id,o=0,a=this.reviews;o<a.length;o++)if(s=a[o],s.user==i){this.postedReview=s;break}return[2]}})})},e.prototype.addToCart=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.cartService.addProduct(this.product)];case 1:return e.sent(),[2]}})})},e.prototype.postReview=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.catalogService.postReview(this.postedReview)];case 1:return t.sent(),e=this,[4,this.catalogService.getReviews(this.product.id)];case 2:return e.reviews=t.sent(),[2]}})})},e}();s=__decorate([r.autoinject,__metadata("design:paramtypes",[i.catalogService,n.AuthService,o.CartService])],s),t.ProductDetail=s});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("elements/product-item",["require","exports","aurelia-framework"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.valueChanged=function(e,t){},e}();__decorate([r.bindable,__metadata("design:type",Object)],n.prototype,"value",void 0),t.ProductItem=n});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("elements/shopping-cart",["require","exports","aurelia-framework","../services/CartService"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.cartService=e,this.value=[]}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return null==this.value||0===this.value.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sum",{get:function(){for(var e=0,t=0,r=this.value;t<r.length;t++){e+=r[t].price}return e.toFixed(2)},enumerable:!0,configurable:!0}),e.prototype.attached=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,this.cartService.getCart()];case 1:return e.value=t.sent(),[2]}})})},e.prototype.removeProduct=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.cartService.removeProduct(e.id)];case 1:return t.sent(),[2]}})})},e}();i=__decorate([r.autoinject,__metadata("design:paramtypes",[n.CartService])],i),t.ShoppingCart=i}),define("entities/Category",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.Category=r}),define("entities/Format",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.Format=r}),define("entities/Log",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.Log=r}),define("entities/Order",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.Order=r}),define("entities/Product",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.Product=r}),define("entities/Review",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.Review=r}),define("entities/Tag",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.Tag=r}),define("entities/User",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.User=r}),define("resources/index",["require","exports"],function(e,t){"use strict";function r(e){}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=r});var __awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},
"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("services/CartService",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.cartKey="cart",e.cart=[]}return e.prototype.isStorageSupported=function(){return null!==window.localStorage},e.prototype.getCart=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return this.isStorageSupported()&&null!=(t=JSON.parse(window.localStorage.getItem(this.cartKey)))&&(e.cart=t),[2,e.cart]})})},e.prototype.addProduct=function(t){return __awaiter(this,void 0,void 0,function(){var r,n,i;return __generator(this,function(o){if(null==t)return[2];for(r=0,n=e.cart;r<n.length;r++)if(i=n[r],i.id===t.id)return[2];return e.cart.push(t),this.save(),[2]})})},e.prototype.removeProduct=function(t){return __awaiter(this,void 0,void 0,function(){var r,n,i,o;return __generator(this,function(a){for(r=0,n=e.cart;r<n.length;r++)i=n[r],i.id==t&&(o=e.cart.indexOf(i),e.cart.splice(o,1),this.save());return[2]})})},e.prototype.emptyCart=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.cart=[],this.save(),[2]})})},e.prototype.save=function(){this.isStorageSupported()&&window.localStorage.setItem(this.cartKey,JSON.stringify(e.cart))},e}();t.CartService=r});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("services/catalogService",["require","exports","aurelia-fetch-client","aurelia-framework"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.http=e}return e.prototype.getPage=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.http.fetch("/catalog/products",{body:r.json({Item1:e})})];case 1:return t=n.sent(),[4,t.json()];case 2:return[2,n.sent()]}})})},e.prototype.search=function(e,t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){switch(i.label){case 0:return[4,this.http.fetch("/catalog/products/search",{body:r.json({Item1:e,Item2:t})})];case 1:return n=i.sent(),[4,n.json()];case 2:return[2,i.sent()]}})})},e.prototype.getPageWithCategory=function(e,t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){switch(i.label){case 0:return[4,this.http.fetch("/catalog/category/products",{body:r.json({Item1:e,Item2:t})})];case 1:return n=i.sent(),[4,n.json()];case 2:return[2,i.sent()]}})})},e.prototype.getTopLevelCategories=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.http.fetch("/catalog/categories")];case 1:return e=t.sent(),[4,e.json()];case 2:return[2,t.sent()]}})})},e.prototype.getProduct=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.http.fetch("/catalog/product",{body:r.json({Item1:e})})];case 1:return t=n.sent(),[4,t.json()];case 2:return[2,n.sent()]}})})},e.prototype.getReviews=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.http.fetch("/catalog/reviews",{body:r.json({Item1:e})})];case 1:return t=n.sent(),[4,t.json()];case 2:return[2,n.sent()]}})})},e.prototype.postReview=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.http.fetch("/catalog/reviews/post",{body:r.json(e)})];case 1:return t.sent(),[2]}})})},e}();i=__decorate([n.autoinject,__metadata("design:paramtypes",[r.HttpClient])],i),t.catalogService=i;var o=function(){function e(){}return e}();t.PageResponse=o});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("services/OrderService",["require","exports","aurelia-fetch-client","aurelia-framework"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.http=e}return e.prototype.addOrder=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(o){switch(o.label){case 0:return[4,this.http.fetch("/order/add",{body:r.json({Item1:e,Item2:t,Item3:n})})];case 1:return i=o.sent(),[2,i.ok]}})})},e.prototype.getOrderedProducts=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.http.fetch("/order/products",{body:r.json({Item1:e})})];case 1:return t=n.sent(),[4,t.json()];case 2:return[2,n.sent()]}})})},e.prototype.getProductsByOrder=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.http.fetch("/order/products/order",{body:r.json({Item1:e})})];case 1:return t=n.sent(),[4,t.json()];case 2:return[2,n.sent()]}})})},e.prototype.getOrdersByUser=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.http.fetch("/order/orders",{body:r.json({Item1:e})})];case 1:return t=n.sent(),[4,t.json()];case 2:return[2,n.sent()]}})})},e}();i=__decorate([n.autoinject,__metadata("design:paramtypes",[r.HttpClient])],i),t.OrderService=i});var __decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};define("services/UserService",["require","exports","aurelia-fetch-client","aurelia-framework"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.http=e}return e.prototype.Register=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,i;return __generator(this,function(o){switch(o.label){case 0:return[4,this.http.fetch("/Auth/Register",{body:r.json({item1:e,item2:t})})];case 1:return n=o.sent(),[4,n.json()];case 2:return i=o.sent(),[2,i.item1]}})})},e}();i=__decorate([n.autoinject,__metadata("design:paramtypes",[r.HttpClient])],i),t.UserService=i}),define("valueConverters/priceValueConverter",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.toView=function(e){return"number"!=typeof e&&(e=parseFloat(e)),"€"+e.toFixed(2)},e}();t.PriceValueConverter=r}),define("text!app.html",["module"],function(e){e.exports='<template bindable="router">\r\n  <require from="bootstrap/css/bootstrap.css"></require>\r\n  <require from="resources/style.css"></require>\r\n  <nav class="navbar navbar-default navbar-static-top" role="navigation">\r\n    <div class="navbar-header">\r\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\r\n        <span class="sr-only">Toggle Navigation</span>\r\n        <span class="icon-bar"></span>\r\n        <span class="icon-bar"></span>\r\n        <span class="icon-bar"></span>\r\n      </button>\r\n      <a class="navbar-brand" href="/">\r\n        <i class="fa fa-home"></i>\r\n        <span>${router.title}</span>\r\n      </a>\r\n    </div>\r\n\r\n    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n      <ul class="nav navbar-nav">\r\n        <li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'}">\r\n          <a data-toggle="collapse" data-target="#bs-example-navbar-collapse-1.in" href.bind="row.href">${row.title}</a>\r\n        </li>\r\n      </ul>\r\n\r\n      <ul class="nav navbar-nav navbar-right">\r\n        <li class="loader" if.bind="router.isNavigating">\r\n          <i class="fa fa-spinner fa-spin fa-2x"></i>\r\n        </li>\r\n        <li if.bind="auth.authenticated">\r\n          <a route-href="route: MyOrders">My Orders</a>\r\n        </li>\r\n        <li if.bind="auth.authenticated">\r\n          <a route-href="route: orderedProducts">My Products</a>\r\n        </li>\r\n        <li >\r\n            <a if.bind="!auth.authenticated" route-href="route: login">Login</a>\r\n            <a if.bind="auth.authenticated" click.delegate="logout()">Logout</a>\r\n        </li>\r\n\r\n      </ul>\r\n    </div>\r\n  </nav>\r\n \r\n  <router-view></router-view>\r\n </template>\r\n'}),define("text!resources/style.css",["module"],function(e){e.exports=".product-description {\n  height: 150px;\n  overflow: hidden; }\n\n.product-panel {\n  height: 470px; }\n"}),define("text!components/catalog.html",["module"],function(e){e.exports='<template>\r\n  <require from="../elements/product-item"></require>\r\n  <require from="../elements/shopping-cart"></require>\r\n\r\n  <div class="col-md-2 sticky-top" >\n    <form>\n      <label for="search">Search</label>\n      <input name="search" type="text" value.bind="searchString" change.delegate="search() & debounce:200"/>\n    </form>\r\n    <shopping-cart></shopping-cart>\r\n  </div>\r\n  <div class="container">\r\n    <h1>Catalog</h1>\r\n    <ul class="pagination col-md-9">\r\n      <li class="${i+1 == number ? \'active\' : \'\'}" repeat.for="i of pageAmount">\r\n        <a route-href="route: catalogNum; params.bind: {number:i+1}"\r\n           click.delegate="refreshPage($i+1)">${i+1}</a>\r\n      </li>\r\n    </ul>\r\n    <div class="row col-md-12">\r\n      <product-item value.bind="item" repeat.for="item of products"></product-item>\r\n    </div>\r\n    \x3c!-- \r\n      <div class="row col-md-3">\r\n        <ul class="list-group">\r\n          <li repeat.for="item of categories" class="list-group-item">${item.name}</li>\r\n        </ul>\r\n      </div>\r\n    --\x3e\r\n    <ul class="pagination col-md-9">\r\n      <li class="${i+1 == number ? \'active\' : \'\'}" repeat.for="i of pageAmount">\r\n        <a route-href="route: catalogNum; params.bind: {number:i+1}"\r\n           click.delegate="refreshPage($i+1)">${i+1}</a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>'}),define("text!components/error-404.html",["module"],function(e){e.exports='<template>\n  <div class="container">\n    <h1>${message}</h1>\n  </div>\n</template>'}),define("text!components/home.html",["module"],function(e){e.exports='<template>\n  <div class="jumbotron">\r\n    <div class="container">\r\n      <h1 class="display-3">Hello, world!</h1>\r\n      <p>This is a template for a simple marketing or informational website. It includes a large callout called a jumbotron and three supporting pieces of content. Use it as a starting point to create something more unique.</p>\r\n      <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more &raquo;</a></p>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="container">\r\n    \x3c!-- Example row of columns --\x3e\r\n    <div class="row">\r\n      <div class="col-md-4">\r\n        <h2>Heading</h2>\r\n        <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>\r\n        <p><a class="btn btn-secondary" href="#" role="button">View details &raquo;</a></p>\r\n      </div>\r\n      <div class="col-md-4">\r\n        <h2>Heading</h2>\r\n        <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>\r\n        <p><a class="btn btn-secondary" href="#" role="button">View details &raquo;</a></p>\r\n      </div>\r\n      <div class="col-md-4">\r\n        <h2>Heading</h2>\r\n        <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>\r\n        <p><a class="btn btn-secondary" href="#" role="button">View details &raquo;</a></p>\r\n      </div>\r\n    </div>\r\n\r\n    <footer>\r\n      <p>&copy; Company 2017</p>\r\n    </footer>\r\n  </div>\n</template>'}),define("text!components/login.html",["module"],function(e){e.exports='\ufeff<template>\r\n  <div class="container">\r\n    <div class="text-center">${message}</div>\r\n    <div class="row">\r\n      <form class="col-md-6" name="loginForm" submit.delegate="login()">\r\n        <h1 id="loginHeader">Login</h1>\r\n        <div class="form-group has-feedback">\r\n          <input class="form-control input-lg" type="text" name="username" value.bind="username" placeholder="username" required autofocus>\r\n          <span class="ion-at form-control-feedback"></span>\r\n        </div>\r\n\r\n        <div class="form-group has-feedback">\r\n          <input class="form-control input-lg" type="password" name="password" value.bind="password" placeholder="Password" required>\r\n          <span class="ion-key form-control-feedback"></span>\r\n        </div>\r\n        <button type="submit" class="btn btn-lg">Log In</button>\r\n      </form>\r\n\r\n      <form class="col-md-6" name="registerForm" submit.delegate="register()">\r\n        <h1 id="loginHeader">register</h1>\r\n        <div class="form-group has-feedback">\r\n          <input class="form-control input-lg" type="text" name="username" value.bind="newUser.username" placeholder="username" required autofocus>\r\n          <span class="ion-at form-control-feedback"></span>\r\n        </div>\r\n\r\n        <div class="form-group has-feedback">\r\n          <input class="form-control input-lg" type="password" name="password" value.bind="newPassword" placeholder="Password" required>\r\n          <span class="ion-key form-control-feedback"></span>\r\n        </div>\r\n        <div class="form-group has-feedback">\r\n          <input class="form-control input-lg" type="text" name="email" value.bind="newUser.email" placeholder="email" required>\r\n          <span class="ion-key form-control-feedback"></span>\r\n        </div>\r\n\r\n        <button type="submit" class="btn btn-lg">Register</button>\r\n      </form>\r\n    </div>\r\n</div>\r\n</template>\r\n'}),define("text!components/orderconfirmation.html",["module"],function(e){e.exports='<template>\r\n  <require from="../valueConverters/priceValueConverter"></require>\r\n  <div class="panel panel-default">\r\n    <div class="panel-heading">Order:</div>\r\n    <div class="panel-body table-responsive" if.bind="!isEmpty">\r\n      <table class="table table-striped">\r\n        <tr repeat.for="item of value">\r\n          <td>${item.name}</td>\r\n          <td>${item.price | price}</td>\r\n          <td>${item.author}</td>\r\n        </tr>\r\n      </table>\r\n      <input type="text" value.bind="discount" />\r\n      <button class="btn" click.delegate="addOrder()">Order</button>\r\n    </div>\r\n    <div if.bind="isEmpty">\r\n      No products have been ordered yet\r\n    </div>\r\n  </div>\r\n</template>'}),define("text!components/ordered-products.html",["module"],function(e){e.exports='<template>\r\n  <require from="../valueConverters/priceValueConverter"></require>\r\n  <div class="panel panel-default">\r\n    <div class="panel-heading">Ordered products:</div>\r\n    <div class="panel-body table-responsive" if.bind="!isEmpty">\r\n      <table class="table table-striped">\r\n        <tr repeat.for="item of products">\r\n          <td>${item.name}</td>\r\n          <td>${item.price | price}</td>\r\n          <td>${item.author}</td>\r\n          <td><button class="btn">Download</button></td>\r\n        </tr>\r\n      </table>\r\n      <button class="btn">Download all</button>\r\n    </div>\r\n    <div if.bind="isEmpty">\r\n      No products have been ordered yet\r\n    </div>\r\n  </div>\r\n</template>'}),define("text!components/orderlist.html",["module"],function(e){e.exports='<template>\r\n  <require from="../valueConverters/priceValueConverter"></require>\r\n  <div class="container">\r\n    <div class="row" if.bind="!isOrderEmpty">\r\n      <div class="panel panel-default col-md-4">\r\n        <div class="panel-heading">Orders</div>\r\n        <div class="panel-body table-responsive" >\r\n          <table class="table table-striped">\r\n            <tr repeat.for="item of orders">\r\n              <td>${item.name}</td>\r\n              <td>${item.price | price}</td>\r\n              <td>${item.author}</td>\r\n              <td><button click.delegate="selectOrder(item.id)" class="btn ${selectedOrder == item.id ? \'disabled\' : \'\'}">${selectedOrder == item.id ? "selected" : "select"}</button></td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <div class="panel panel-default col-md-8">\r\n        <div class="panel-heading">Ordered products:</div>\r\n        <div class="panel-body table-responsive">\r\n          <table class="table table-striped" if.bind="!isProductEmpty">\r\n            <tr repeat.for="item of products">\r\n              <td>${item.name}</td>\r\n              <td>&euro;${item.price | price}</td>\r\n              <td> ${item.author}</td>\r\n              <td><button class="btn">Download</button></td>\r\n            </tr>\r\n          </table>\r\n          <button class="btn">Download all</button>\r\n        </div>\r\n        <div if.bind="isProductEmpty">\r\n          Order is enpty\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div if.bind="isOrderEmpty">\r\n      No products have been ordered yet\r\n    </div>\r\n  </div>\r\n</template>'}),define("text!components/productDetail.html",["module"],function(e){e.exports='<template>\r\n  <require from="../elements/shopping-cart"></require>\r\n  <require from="../valueConverters/priceValueConverter"></require>\r\n\r\n  <div class="col-md-2 sticky-top">\r\n    <shopping-cart></shopping-cart>\r\n  </div>\r\n<div class="container">\r\n  <h1>${product.name}</h1>\r\n  <div class="row col-md-12">\r\n      <img if.bind="product.image" src="${product.image}" class="img-thumbnail col-md-4" alt="${product.name}">\r\n      <div class="col-md-8">\r\n        <div>Price: ${product.price | price}</div>\r\n        <div>Author: ${product.author}</div>\r\n        <button click.delegate="addToCart()" class="btn">Add to cart</button>\r\n      </div>\r\n      <div class="col-md-12">${product.text}</div>\r\n  </div>\r\n  <div class="row col-md-12">\r\n    <div repeat.for="item of reviews" class="panel panel-default col-md-12">\r\n      <div class="panel-heading">Name: ${item.user}, Rating: ${item.rating}</div>\r\n      <div class="col-md-12">${item.text}</div>\r\n    </div>\r\n    <div if.bind="auth.isAuthenticated()" class="panel panel-default col-md-12">\r\n      <form role="form" submit.delegate="postReview()">\r\n        <div class="panel-heading col-md-12">Name: ${postedReview.user}</div>\r\n        <select required class="col-md-12" value.bind="postedReview.rating">\r\n          <option model.bind="null">Choose a rating</option>\r\n          <option repeat.for="i of 100" model.bind="i+1">${i+1}</option>\r\n        </select>\r\n        <textarea required class="col-md-12" value.bind="postedReview.Text"></textarea>\r\n        <button class="btn" type="submit">Post review</button>\r\n      </form>\r\n    </div>\r\n    <div if.bind="!auth.isAuthenticated()">You need to be logged in to post a review</div>\r\n  </div>\r\n</div>\r\n</template>'}),define("text!elements/product-item.html",["module"],function(e){e.exports='<template>\r\n  <require from="../valueConverters/priceValueConverter"></require>\r\n  <div class="panel panel-default product-panel col-md-3">\r\n    <div class="panel-heading"><a route-href="route: product; params.bind: {id:value.id}">${value.name}</a></div>\r\n    <div>${value.price | price}</div>\r\n    <div class="panel-body product-description">${value.text}</div>\r\n    <img src="${value.image}" class="img-thumbnail" alt="${item.name}" width="304" height="236">\r\n  </div>\r\n</template>'}),define("text!elements/shopping-cart.html",["module"],function(e){e.exports='<template>\r\n  <require from="../valueConverters/priceValueConverter"></require>\r\n  <div class="panel panel-default">\r\n    <div class="panel-heading">Cart:</div>\r\n    <div class="panel-body table-responsive" if.bind="!isEmpty">\r\n      <table class="table table-striped">\r\n        <tr repeat.for="item of value">\r\n          <td>${item.name}</td>\r\n          <td>${item.price | price}</td>\r\n          <td>${item.author}</td>\r\n          <td><button class="btn" click.delegate="removeProduct(item)"><span class="glyphicon glyphicon-remove"></span></button></td>\r\n        </tr>\r\n      </table>\r\n      <p>Total price: ${sum | price}</p>\r\n      <a class="btn" route-href="route: OrderConfirmation">Order</a>\r\n    </div>\r\n    <div if.bind="isEmpty">\r\n      The cart is empty :(\r\n    </div>\r\n  </div>\r\n</template>'});